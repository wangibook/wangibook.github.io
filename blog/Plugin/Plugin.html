<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>一、初始化本地开发项目 | 个人主页</title>
    <meta name="description" content="Just for fun">
    <link rel="icon" href="/logo.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.073a9229.css" as="style"><link rel="preload" href="/assets/js/app.b1dbff9a.js" as="script"><link rel="preload" href="/assets/js/2.01ae0a7c.js" as="script"><link rel="preload" href="/assets/js/11.0598bbd7.js" as="script"><link rel="prefetch" href="/assets/js/10.bfbce69d.js"><link rel="prefetch" href="/assets/js/12.6b803266.js"><link rel="prefetch" href="/assets/js/13.f763a7d5.js"><link rel="prefetch" href="/assets/js/14.a518c139.js"><link rel="prefetch" href="/assets/js/15.5cf70f24.js"><link rel="prefetch" href="/assets/js/16.e625795a.js"><link rel="prefetch" href="/assets/js/3.6c06ab37.js"><link rel="prefetch" href="/assets/js/4.9864715d.js"><link rel="prefetch" href="/assets/js/5.e0bc583e.js"><link rel="prefetch" href="/assets/js/6.943c6df1.js"><link rel="prefetch" href="/assets/js/7.3242f8c8.js"><link rel="prefetch" href="/assets/js/8.d533ef43.js"><link rel="prefetch" href="/assets/js/9.0860a58d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.073a9229.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">个人主页</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Css/Css.html" class="nav-link">Css</a></li><li class="dropdown-item"><!----> <a href="/blog/JavaScript/JavaScript.html" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/Vue.html" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/blog/Node/Node.html" class="nav-link">Node</a></li><li class="dropdown-item"><!----> <a href="/blog/Webpack/Webpack.html" class="nav-link">Webpack</a></li></ul></div></div><div class="nav-item"><a href="https://element.eleme.cn/#/zh-CN/component/installation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  element文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.webpackjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webpack文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Css/Css.html" class="nav-link">Css</a></li><li class="dropdown-item"><!----> <a href="/blog/JavaScript/JavaScript.html" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/blog/Vue/Vue.html" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/blog/Node/Node.html" class="nav-link">Node</a></li><li class="dropdown-item"><!----> <a href="/blog/Webpack/Webpack.html" class="nav-link">Webpack</a></li></ul></div></div><div class="nav-item"><a href="https://element.eleme.cn/#/zh-CN/component/installation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  element文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.webpackjs.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  webpack文档
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/Vuepress/VuePress.html" class="sidebar-link">VuePress搭建个人线上博客</a></li><li><a href="/markDown/MarkDown.html" class="sidebar-link">Markdown基本语法</a></li><li><a href="/blog/Css/Css.html" class="sidebar-link">Css</a></li><li><a href="/blog/JavaScript/JavaScript.html" class="sidebar-link">JavaScript</a></li><li><a href="/blog/Vue/Vue.html" class="sidebar-link">Vue学习</a></li><li><a href="/blog/Element/Vue-element-admin.html" class="sidebar-link">Vue-element-admin</a></li><li><a href="/blog/Plugin/Plugin.html" class="active sidebar-link">撸一个Vue插件，发布到npm上</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Plugin/Plugin.html#一、初始化本地开发项目" class="sidebar-link">一、初始化本地开发项目</a></li><li class="sidebar-sub-header"><a href="/blog/Plugin/Plugin.html#二、插件开发" class="sidebar-link">二、插件开发</a></li><li class="sidebar-sub-header"><a href="/blog/Plugin/Plugin.html#三、发布到npm上，方便以后用" class="sidebar-link">三、发布到npm上，方便以后用</a></li></ul></li><li><a href="/blog/Optimize/Optimize.html" class="sidebar-link">性能优化</a></li><li><a href="/blog/Node/Node.html" class="sidebar-link">Node.js学习</a></li><li><a href="/blog/webpack/webpack.html" class="sidebar-link">从零开始配置webpack</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="一、初始化本地开发项目"><a href="#一、初始化本地开发项目" aria-hidden="true" class="header-anchor">#</a> 一、初始化本地开发项目</h2> <p>采用vue-cli，初始化一个vue项目</p> <h3 id="_1-安装node，默认会安装npm"><a href="#_1-安装node，默认会安装npm" aria-hidden="true" class="header-anchor">#</a> 1.安装node，默认会安装npm</h3> <p>去node官网下载并安装，安装完后打开cmd，查看是否安装成功
<img src="/images/1.png" alt=""></p> <h3 id="_2-安装vue-cli"><a href="#_2-安装vue-cli" aria-hidden="true" class="header-anchor">#</a> 2.安装vue-cli</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> -g vue-cli
</code></pre></div><p>安装完后，同样可以查看下安装情况</p> <div class="language-sh extra-class"><pre class="language-sh"><code>vue -V
</code></pre></div><h3 id="_3-初始化一个vue项目"><a href="#_3-初始化一个vue项目" aria-hidden="true" class="header-anchor">#</a> 3.初始化一个vue项目</h3> <div class="language-sh extra-class"><pre class="language-sh"><code>vue init webpack  my-plugin
</code></pre></div><p>然后填写相关信息：<br> <img src="/images/2.png" alt=""></p> <p>进入项目，安装项目依赖，并启动项目</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> my-plgin   
<span class="token function">npm</span> <span class="token function">install</span>
<span class="token function">npm</span> run dev
</code></pre></div><p>打开浏览器，看到项目已经启动成功了
<img src="/images/3.png" alt=""></p> <h2 id="二、插件开发"><a href="#二、插件开发" aria-hidden="true" class="header-anchor">#</a> 二、插件开发</h2> <h4 id="插件通常会为-vue-添加全局功能。插件的范围没有限制——一般有下面几种："><a href="#插件通常会为-vue-添加全局功能。插件的范围没有限制——一般有下面几种：" aria-hidden="true" class="header-anchor">#</a> 插件通常会为 Vue 添加全局功能。插件的范围没有限制——一般有下面几种：</h4> <div class="language-js extra-class"><pre class="language-js"><code>MyPlugin<span class="token punctuation">.</span><span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">Vue<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 第一种方法. 添加全局方法或属性</span>
    Vue<span class="token punctuation">.</span><span class="token function-variable function">myGlobalMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 逻辑...</span>
    <span class="token punctuation">}</span>
 
    <span class="token comment">// 第二种方法. 添加全局资源</span>
    Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'my-directive'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token function">bind</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> oldVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 逻辑...</span>
        <span class="token punctuation">}</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
 
    <span class="token comment">// 第三种方法. 注入组件</span>
    Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function-variable function">created</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 逻辑...</span>
        <span class="token punctuation">}</span>
         <span class="token operator">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
 
    <span class="token comment">// 第四种方法. 添加实例方法</span>
    <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$myMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">methodOptions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 逻辑...</span>
    <span class="token punctuation">}</span>
 
    <span class="token comment">// 第五种方法，注册组件</span>
    Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>组件名<span class="token punctuation">,</span> 组件<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这些形式都可以作为我们的插件开发。插件的本质不就是为了代码的复用吗？根据你的封装需求选择不同的形式，例如toast提示可以选择Vue.prototype，输入框自动获取焦点可以选择Vue.directive指令，自定义组件可以选择Vue.component的形式。
这里，我们可以用Vue.compnent的形式。</p> <h4 id="新建一个plugin目录，放置我们要开发的插件，比如这里我们做一个简单的total弹框显示"><a href="#新建一个plugin目录，放置我们要开发的插件，比如这里我们做一个简单的total弹框显示" aria-hidden="true" class="header-anchor">#</a> 新建一个plugin目录，放置我们要开发的插件，比如这里我们做一个简单的total弹框显示</h4> <p><img src="/images/4.jpg" alt=""></p> <p>然后我们搭建插件的基本壳子，test.js中代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> testToast <span class="token keyword">from</span> <span class="token string">'./toast.vue'</span>
<span class="token keyword">let</span> test <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// 方法的第一个参数是传入的Vue，第二个是自定义的插件参数</span>
test<span class="token punctuation">.</span><span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">Vue<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$msg <span class="token operator">=</span> <span class="token string">'Hello I am test.js'</span>
  <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$myMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      arr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'连接你我'</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> arr
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// testPanel.name 组件的name属性</span>
  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>testToast<span class="token punctuation">.</span>name<span class="token punctuation">,</span> testToast<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">export</span> <span class="token keyword">default</span> test
</code></pre></div><h4 id="index-js中代码："><a href="#index-js中代码：" aria-hidden="true" class="header-anchor">#</a> index.js中代码：</h4> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./lib/test'</span><span class="token punctuation">)</span>
</code></pre></div><p>待插件开发好后，就可以在mian.js中这样使用：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> vueTotal <span class="token keyword">from</span> <span class="token string">'./plugin/toast'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>vueTotal<span class="token punctuation">)</span>
</code></pre></div><p>而后在我们的页面中就可以直接像使用组件的方式使用插件：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>handleClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击触发子组件的toast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test-toast</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>toast<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test-toast</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">creted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>toast<span class="token punctuation">.</span><span class="token function">toastPlugin</span><span class="token punctuation">(</span><span class="token string">'在父组件里触发调用的toast'</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>基本思路和插件的壳子有了，下面就开始开发toast.vue，这插件的具体内容了</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>toast<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>toastPosition<span class="token punctuation">'</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{active: toastHidden}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>toast-warpper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{text}}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'test-toast'</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      text<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      toastHidden<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// this.toastPlugin()</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">toastPlugin</span> <span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> msg
      <span class="token keyword">this</span><span class="token punctuation">.</span>toastHidden <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>toastHidden <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.toast</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
    <span class="token property">min-height</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 0.5s<span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.toast.active</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
    <span class="token property">min-height</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> 11<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>实现效果如下：<br> <img src="/images/5.jpg" alt=""></p> <p>点击按钮，出现下面的toast弹框，2s后消失。至此，我们的插件就开发完了。</p> <h2 id="三、发布到npm上，方便以后用"><a href="#三、发布到npm上，方便以后用" aria-hidden="true" class="header-anchor">#</a> 三、发布到npm上，方便以后用</h2> <p><img src="/images/6.jpg" alt=""></p> <p>toast文件下面的index.js，里面就依据代码，即导出我们的插件：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./lib/test'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="关于readme-md，我们可以写一个简单的markdown文档"><a href="#关于readme-md，我们可以写一个简单的markdown文档" aria-hidden="true" class="header-anchor">#</a> 关于README.md，我们可以写一个简单的markdown文档</h3> <p><img src="/images/7.jpg" alt=""></p> <h3 id="关于package-json文件，这个一开始是没有的，这是npm包的配置文件。我们要首先进入toast文件夹的位置，然后终端运行npm-init命令来初始化一个npm包配置文件，此时他会问你一些列问题来完成配置文件："><a href="#关于package-json文件，这个一开始是没有的，这是npm包的配置文件。我们要首先进入toast文件夹的位置，然后终端运行npm-init命令来初始化一个npm包配置文件，此时他会问你一些列问题来完成配置文件：" aria-hidden="true" class="header-anchor">#</a> 关于package.json文件，这个一开始是没有的，这是npm包的配置文件。我们要首先进入toast文件夹的位置，然后终端运行npm init命令来初始化一个npm包配置文件，此时他会问你一些列问题来完成配置文件：</h3> <ul><li>name：包名，默认是文件夹名。但是这个名字是需要唯一的，如果你命的名字已经被使用过了，那就只能换个名字。至于怎么查看包名是否存在，你可以去npmjs官网搜索你的包名，如果没搜索到则可以使用。</li> <li>version：包的版本，默认是1.0.0， 你可以更换，例如0.1.0或2.0.1等。</li> <li>description：包的描述。主要描述你的包是用来做什么的。</li> <li>entry point：包入口文件，默认是Index.js，可以自定义。</li> <li>test command：测试命令，这个直接回车就好了，因为目前还不需要这个。</li> <li>git repository：包的git仓库地址，npm自动读取.git目录作为这一项的默认值。没使用则回车略过。</li> <li>keyword：包的关键词。该项会影响到用户怎样才能搜到你的包，可以理解为搜索引擎悠哈的关键词。建议关键词要能准确描述你的包，例如：&quot;vpay vue-pay vue-password password&quot;</li> <li>author：作者。例如你的npm账号或者github账号</li> <li>license：开源协议，回车就好。</li></ul> <h3 id="到这一步，其实我们已经做好了本地包的开发，我们要测试一下包能不能使用。怎么测试呢？我们知道，平时是使用npm安装插件的时候，其实是把插件安装在了根目录下的node-modules文件中。那么，我们既然已经开发好了本地包，我们就把这个toast文件夹直接拷贝到node-modules文件夹中。然后在main-js中像平时一样使用插件："><a href="#到这一步，其实我们已经做好了本地包的开发，我们要测试一下包能不能使用。怎么测试呢？我们知道，平时是使用npm安装插件的时候，其实是把插件安装在了根目录下的node-modules文件中。那么，我们既然已经开发好了本地包，我们就把这个toast文件夹直接拷贝到node-modules文件夹中。然后在main-js中像平时一样使用插件：" aria-hidden="true" class="header-anchor">#</a> 到这一步，其实我们已经做好了本地包的开发，我们要测试一下包能不能使用。怎么测试呢？我们知道，平时是使用npm安装插件的时候，其实是把插件安装在了根目录下的node_modules文件中。那么，我们既然已经开发好了本地包，我们就把这个toast文件夹直接拷贝到node_modules文件夹中。然后在main.js中像平时一样使用插件：</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> vueTotal <span class="token keyword">from</span> <span class="token string">'toast'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>vueTotal<span class="token punctuation">)</span>
</code></pre></div><p>测试一看，一切正常，说明我们的包是没问题的。</p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>下面是发布到npm上，注册npm账号</p></div> <h3 id="执行npm-login命令登录我们的npm账号，输入用户名和密码（输入密码没有提示）"><a href="#执行npm-login命令登录我们的npm账号，输入用户名和密码（输入密码没有提示）" aria-hidden="true" class="header-anchor">#</a> 执行npm login命令登录我们的npm账号，输入用户名和密码（输入密码没有提示）</h3> <p>如果配置了淘宝镜像，先设置回npm镜像：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry http://registry.npmjs.org
</code></pre></div><h3 id="然后再执行-npm-publish"><a href="#然后再执行-npm-publish" aria-hidden="true" class="header-anchor">#</a> 然后再执行 npm publish</h3> <p>发布成功后，去npm官网上查阅一下我们的包：
<img src="/images/8.jpg" alt=""></p> <p>点击进去看下，一切正常。以后就直接可以通过npm i test-plugin-toast -g 将插件安装到我们的项目中了。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/Element/Vue-element-admin.html" class="prev">
          Vue-element-admin
        </a></span> <span class="next"><a href="/blog/Optimize/Optimize.html">
          性能优化
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b1dbff9a.js" defer></script><script src="/assets/js/2.01ae0a7c.js" defer></script><script src="/assets/js/11.0598bbd7.js" defer></script>
  </body>
</html>
